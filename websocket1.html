<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <meta name="format-detection" content="telephone=no">
  <title>websocket demo</title>
</head>
<body>
<button class="d-btn-send">发送消息</button>
<button class="d-btn-cancel">取消连接</button>
<button class="d-btn-reset">重启websocket</button>

<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<!-- <script src="js/websocket.js" type="text/javascript"></script> -->
<script>
var ws = new WebSocket("ws://10.0.7.254:9900");
//申请一个WebSocket对象，参数是服务端地址，同http协议使用http://开头一样，WebSocket协议的url使用ws://开头，另外安全的WebSocket协议使用wss://开头
ws.onopen = function(event){
　　//当WebSocket创建成功时，触发onopen事件
//
   // console.log(event);
   console.log("open");
　　ws.send("hello"); //将消息发送到服务端
}
ws.onmessage = function(e){
　　//当客户端收到服务端发来的消息时，触发onmessage事件，参数e.data包含server传递过来的数据
　　console.log('ok');
    var data = JSON.parse(e.data);
　　console.log(data.msg);
}
ws.onclose = function(e){
　　//当客户端收到服务端发送的关闭连接请求时，触发onclose事件
　　console.log("close");
}
ws.onerror = function(e){
　　//如果出现连接、处理、接收、发送数据失败的时候触发onerror事件
　　console.log(error);
}
</script>
</body>
</html>
